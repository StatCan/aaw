


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="User guide for the DAaaS AAW Platform">
      
      
        <link rel="canonical" href="https://statcan.github.io/daaas/en/3-Pipelines/Kubeflow-Pipelines/">
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Kubeflow Pipelines - Advanced Analytics Workspace</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://statcan.github.io/daaas/en/" title="Advanced Analytics Workspace" class="md-header-nav__button md-logo" aria-label="Advanced Analytics Workspace">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Advanced Analytics Workspace
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Kubeflow Pipelines
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/StatCan/daaas/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StatCan/daaas
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://statcan.github.io/daaas/en/" title="Advanced Analytics Workspace" class="md-nav__button md-logo" aria-label="Advanced Analytics Workspace">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Advanced Analytics Workspace
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/StatCan/daaas/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StatCan/daaas
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Analysis
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Analysis" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Experiments/Kubeflow/" title="Kubeflow" class="md-nav__link">
      Kubeflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Experiments/Jupyter/" title="Jupyter" class="md-nav__link">
      Jupyter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Experiments/RStudio/" title="RStudio" class="md-nav__link">
      RStudio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Experiments/Remote-Desktop/" title="Remote Desktop" class="md-nav__link">
      Remote Desktop
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Publishing
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Publishing" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Publishing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-Publishing/R-Shiny/" title="R Shiny" class="md-nav__link">
      R Shiny
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-Publishing/Dash/" title="Dash" class="md-nav__link">
      Dash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-Publishing/Datasette/" title="Datasette" class="md-nav__link">
      Datasette
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-Publishing/PowerBI/" title="Power BI" class="md-nav__link">
      Power BI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-Publishing/Custom/" title="Custom" class="md-nav__link">
      Custom
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Pipelines
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Pipelines" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Pipelines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Kubeflow Pipelines
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Kubeflow Pipelines" class="md-nav__link md-nav__link--active">
      Kubeflow Pipelines
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-pipelines-and-how-do-they-work" class="md-nav__link">
    What are pipelines and how do they work?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-and-run-your-first-pipeline-using-the-python-sdk" class="md-nav__link">
    Define and run your first pipeline using the Python SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-what-computation-occurs-when" class="md-nav__link">
    Understanding what computation occurs when
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#once-youve-got-the-basics" class="md-nav__link">
    Once you've got the basics ...
  </a>
  
    <nav class="md-nav" aria-label="Once you've got the basics ...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-exchange" class="md-nav__link">
    Data Exchange
  </a>
  
    <nav class="md-nav" aria-label="Data Exchange">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passing-data-into-within-and-from-a-pipeline" class="md-nav__link">
    Passing data into, within, and from a pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-secrets" class="md-nav__link">
    Passing Secrets
  </a>
  
    <nav class="md-nav" aria-label="Passing Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-key-value-store" class="md-nav__link">
    Create a key-value store
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-an-existing-key-value-store" class="md-nav__link">
    Get an existing key-value store
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-kubernetes-secrets-to-environment-variables-in-container-operations" class="md-nav__link">
    Mounting Kubernetes Secrets to Environment Variables in Container Operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameterizing-pipelines" class="md-nav__link">
    Parameterizing pipelines
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-complexlarge-data-tofrom-a-pipeline" class="md-nav__link">
    Passing complex/large data to/from a pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typical-development-patterns" class="md-nav__link">
    Typical development patterns
  </a>
  
    <nav class="md-nav" aria-label="Typical development patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#end-to-end-pipeline-development" class="md-nav__link">
    End-to-end pipeline development
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-for-authoring-components" class="md-nav__link">
    Methods for authoring components
  </a>
  
    <nav class="md-nav" aria-label="Methods for authoring components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-defined-container-components" class="md-nav__link">
    User-defined container components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lightweight-python-components" class="md-nav__link">
    Lightweight Python components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-components-directly-in-yaml" class="md-nav__link">
    Defining components directly in YAML
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusing-existing-components" class="md-nav__link">
    Reusing existing components
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PaaS/" title="PaaS Integration" class="md-nav__link">
      PaaS Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Serving/" title="Model Serving" class="md-nav__link">
      Model Serving
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Collaboration
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Collaboration" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Collaboration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../4-Collaboration/Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4-Collaboration/Request-a-Namespace/" title="Request a Namespace" class="md-nav__link">
      Request a Namespace
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Storage
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Storage" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../5-Storage/Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../5-Storage/Disks/" title="Disks" class="md-nav__link">
      Disks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../5-Storage/MinIO/" title="MinIO" class="md-nav__link">
      MinIO
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Help/" title="Help/Contact" class="md-nav__link">
      Help/Contact
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-pipelines-and-how-do-they-work" class="md-nav__link">
    What are pipelines and how do they work?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-and-run-your-first-pipeline-using-the-python-sdk" class="md-nav__link">
    Define and run your first pipeline using the Python SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-what-computation-occurs-when" class="md-nav__link">
    Understanding what computation occurs when
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#once-youve-got-the-basics" class="md-nav__link">
    Once you've got the basics ...
  </a>
  
    <nav class="md-nav" aria-label="Once you've got the basics ...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-exchange" class="md-nav__link">
    Data Exchange
  </a>
  
    <nav class="md-nav" aria-label="Data Exchange">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passing-data-into-within-and-from-a-pipeline" class="md-nav__link">
    Passing data into, within, and from a pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-secrets" class="md-nav__link">
    Passing Secrets
  </a>
  
    <nav class="md-nav" aria-label="Passing Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-key-value-store" class="md-nav__link">
    Create a key-value store
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-an-existing-key-value-store" class="md-nav__link">
    Get an existing key-value store
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-kubernetes-secrets-to-environment-variables-in-container-operations" class="md-nav__link">
    Mounting Kubernetes Secrets to Environment Variables in Container Operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameterizing-pipelines" class="md-nav__link">
    Parameterizing pipelines
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-complexlarge-data-tofrom-a-pipeline" class="md-nav__link">
    Passing complex/large data to/from a pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typical-development-patterns" class="md-nav__link">
    Typical development patterns
  </a>
  
    <nav class="md-nav" aria-label="Typical development patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#end-to-end-pipeline-development" class="md-nav__link">
    End-to-end pipeline development
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-for-authoring-components" class="md-nav__link">
    Methods for authoring components
  </a>
  
    <nav class="md-nav" aria-label="Methods for authoring components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-defined-container-components" class="md-nav__link">
    User-defined container components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lightweight-python-components" class="md-nav__link">
    Lightweight Python components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-components-directly-in-yaml" class="md-nav__link">
    Defining components directly in YAML
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusing-existing-components" class="md-nav__link">
    Reusing existing components
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/StatCan/daaas/edit/master/docs/en/3-Pipelines/Kubeflow-Pipelines.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Kubeflow Pipelines</h1>
                
                <h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p><a href="https://www.kubeflow.org/docs/components/pipelines/overview/">Kubeflow Pipelines</a>
is a platform for building machine learning workflows for deployment in a
Kubernetes environment. It enables authoring <em>pipelines</em> that encapsulate
analytical workflows (transforming data, training models, building visuals,
etc.). These <em>pipelines</em> can be shared, reused, and scheduled, and are built to
run on compute provided via Kubernetes. Here is an example of a pipeline with
many <code>sample</code> steps feeding into a single <code>average</code> step. This image comes from
the Kubeflow Pipelines UI.</p>
<p><img alt="A Kubeflow Pipeline" src="../../images/kf-pipeline_with_result.png" /></p>
<p>In the context of the Advanced Analytics Workspace, Kubeflow Pipelines are
interacted with through:</p>
<ul>
<li>The <a href="../../1-Experiments/Kubeflow/">Kubeflow UI</a>, where from the Pipelines menu
  you can upload pipelines, view the pipelines you have and their results, etc.</li>
<li>The Kubeflow Pipelines python
  <a href="https://www.kubeflow.org/docs/pipelines/sdk/sdk-overview/">SDK</a>, accessible
  through the
  <a href="../../1-Experiments/Kubeflow/#create-a-server">Jupyter Notebook Servers</a>,
  where you can define your components and pipelines, submit them to run now, or
  even save them for later.</li>
</ul>
<!-- prettier-ignore -->
<details class="example">
<summary>More examples in the notebooks</summary>
<p>More comprehensive pipeline examples specifically made for this platform are
available on <a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks">GitHub</a> (and in
every Notebook Server at <code>/jupyter-notebooks</code>). You can also check out
<a href="https://github.com/kubeflow/pipelines/tree/master/samples">public sources</a>.</p>
</details>
<p>See
<a href="https://www.kubeflow.org/docs/pipelines/overview/pipelines-overview/">the official Kubeflow docs</a>
for a more detailed explanation of Kubeflow Pipelines.</p>
<h3 id="what-are-pipelines-and-how-do-they-work">What are pipelines and how do they work?<a class="headerlink" href="#what-are-pipelines-and-how-do-they-work" title="Permanent link">&para;</a></h3>
<p>A
<a href="https://www.kubeflow.org/docs/pipelines/overview/concepts/pipeline/"><em>pipeline</em></a>
in Kubeflow Pipelines consists of one or more
<a href="https://www.kubeflow.org/docs/pipelines/overview/concepts/component/"><em>pipeline components</em></a>
chained together to form a workflow. The <em>components</em> are like functions,
describing the individual steps in your workflow (such as pulling columns from a
data store, transforming data, or training a model). The <em>pipeline</em> is the logic
that glues <em>components</em> together, such as:</p>
<ol>
<li>Run Component-A</li>
<li>Pass the output from Component-A to Component-B and Component-C</li>
<li>...</li>
</ol>
<p>In the above image, the logic would be running many <code>sample</code> steps followed by a
single <code>average</code> step.</p>
<p>At their core, each <em>component</em> has:</p>
<ul>
<li>A standalone application, packaged as a
  <a href="https://docs.docker.com/get-started/">Docker image</a>, for doing the actual
  work. The code in the Docker image could be a shell script, Python script, or
  anything else you can run from a Linux terminal, and generally will have a
  command line interface for data exchange (accessible through <code>docker run</code>)</li>
<li>A YAML file that describes how Kubeflow Pipelines runs this code (what Docker
  image should be run, what command line arguments does it accept, what output
  does it generate)</li>
</ul>
<p>Each <em>component</em> should be <strong>single purpose</strong>, <strong>modular</strong>, and <strong>reusable</strong>.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<h3 id="define-and-run-your-first-pipeline-using-the-python-sdk">Define and run your first pipeline using the Python SDK<a class="headerlink" href="#define-and-run-your-first-pipeline-using-the-python-sdk" title="Permanent link">&para;</a></h3>
<p>While <em>pipelines</em> and <em>components</em> are defined in Kubeflow Pipelines by YAML
files that use Docker images, that does not mean we have to work directly with
either YAML files or Docker images. The
<a href="https://www.kubeflow.org/docs/pipelines/sdk/sdk-overview/">Kubeflow Pipelines SDK</a>
provides a way for us to define our <em>pipeline</em> and <em>components</em> directly in
Python code, where the SDK then translates our Python code to YAML files for us.</p>
<p>For our first example, let's define a
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/kfp-basics/average_with_docker_components.ipynb">simple pipeline</a>
using only the Python SDK. The purpose of this section is to give a high level
view of <em>component</em> and <em>pipeline</em> authoring, not a deep dive. More detailed
looks into defining your own <em>components</em>, passing data between <em>components</em>,
and returning data from your <em>pipeline</em> are explained in more detail in further
sections.</p>
<p>The demo pipeline we define will do the following:</p>
<ol>
<li>Accept five numbers as arguments</li>
<li>Average of the first three numbers</li>
<li>Average of the last two numbers</li>
<li>Average of the results of (2) and (3)</li>
</ol>
<p>To do this, we will first define our <em>component</em>. Our <code>average</code> <em>component</em> will
call a Docker image that does the following:</p>
<ul>
<li>Accepts one or more numbers as command line arguments</li>
<li>Returns the average of these numbers by writing them to an output file in the
  container (by default, to <code>out.txt</code>)</li>
</ul>
<p>This Docker image is already built for us and stored in our container registry
here: <code>k8scc01covidacr.azurecr.io/kfp-components/average:v1</code>. Don't worry if you
don't know Docker - since the image is built already, we only have to tell
Kubeflow Pipelines where it is.</p>
<!-- prettier-ignore -->
<p>??? info "Full details of the <code>average</code> component's Docker image are in
    <a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/tree/master/kfp-basics/containers/average">GitHub</a>"
    This image effectively runs the following code (slightly cleaned up for
    brevity).  By making <code>average.py</code> accept an arbitrary set of numbers as
    inputs, we can use the same <code>average</code> <em>component</em> for all steps in our
    <em>pipeline</em>:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">argparse</span>

    <span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Returns the average of one or &quot;</span>
                                         <span class="s2">&quot;more numbers as a JSON file&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;numbers&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;One or more numbers&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output_file&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;out.txt&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Filename &quot;</span>
                            <span class="s2">&quot;to write output number to&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>
        <span class="n">numbers</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">numbers</span>
        <span class="n">output_file</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">output_file</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Averaging numbers: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result = </span><span class="si">{</span><span class="n">avg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Writing output to </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fout</span><span class="p">:</span>
            <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</code></pre></div>

<p>To make our <code>average</code> image into a Kubeflow Pipelines <em>component</em>, we make a
<code>kfp.dsl.ContainerOp</code> in Python that defines how Kubeflow Pipelines interacts
with our container, specifying:</p>
<ul>
<li>The Docker image location to use</li>
<li>How to pass arguments to the running container</li>
<li>What outputs to expect from the container</li>
</ul>
<p>We could use <code>ContainerOp</code> directly, but since we'll use <code>average</code> a few times
we instead create a factory function we can reuse:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">kfp</span> <span class="kn">import</span> <span class="n">dsl</span>

<span class="k">def</span> <span class="nf">average_op</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factory for average ContainerOps</span>

<span class="sd">    Accepts an arbitrary number of input numbers, returning a ContainerOp that</span>
<span class="sd">    passes those numbers to the underlying Docker image for averaging</span>

<span class="sd">    Returns output collected from ./out.txt from inside the container</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Input validation</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Must specify at least one number to take the average of&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;average&quot;</span><span class="p">,</span>  <span class="c1"># What will show up on the pipeline viewer</span>
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;k8scc01covidacr.azurecr.io/kfp-components/average:v1&quot;</span><span class="p">,</span>  <span class="c1"># The image that KFP runs to do the work</span>
        <span class="n">arguments</span><span class="o">=</span><span class="n">numbers</span><span class="p">,</span>  <span class="c1"># Passes each number as a separate command line argument</span>
                            <span class="c1"># Note that these arguments get serialized to strings</span>
        <span class="n">file_outputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;./out.txt&#39;</span><span class="p">},</span>  <span class="c1"># Expect an output file called out.txt to be generated</span>
                                             <span class="c1"># KFP can read this file and bring it back automatically</span>
    <span class="p">)</span>
</code></pre></div>

<p>To define our pipeline, we create a Python function decorated by the
<code>@dsl.pipeline</code> decorator. We invoke our <code>average_op</code> factory to use our average
container. We pass each <code>average</code> some inputs, and even use their outputs by
accessing <code>avg_*.output</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my pipeline&#39;s name&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">my_pipeline</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Averaging pipeline which accepts five numbers and does some averaging</span>
<span class="sd">    operations on them</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Compute averages for two groups</span>
    <span class="n">avg_1</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">avg_2</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="c1"># Use the results from _1 and _2 to compute an overall average</span>
    <span class="n">average_result_overall</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">avg_2</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>

<p>Finally, while we've defined our pipeline in Python, Kubeflow Pipelines itself
needs everything defined as a YAML file. This final step uses the Kubeflow
Pipelines Python SDK to translate our pipeline function into a YAML file that
describes exactly how Kubeflow Pipelines can interact with our component. Unzip
it and take a look for yourself!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">kfp</span> <span class="kn">import</span> <span class="n">compiler</span>
<span class="n">pipeline_yaml</span> <span class="o">=</span> <span class="s1">&#39;pipeline.yaml.zip&#39;</span>
<span class="n">compiler</span><span class="o">.</span><span class="n">Compiler</span><span class="p">()</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="n">my_pipeline</span><span class="p">,</span>
    <span class="n">pipeline_yaml</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported pipeline definition to </span><span class="si">{</span><span class="n">pipeline_yaml</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<!-- prettier-ignore -->
<details class="warning">
<summary>Kubeflow Pipelines is a lazy beast</summary>
<p>It is useful to keep in mind what computation is happening when you run this
python code versus what happens when you submit the pipeline to Kubeflow
Pipelines. Although it seems like everything is happening in the moment, try
adding <code>print(avg_1.output)</code> to the above pipeline and see what happens when
you compile your pipeline. The Python SDK we're using is for <em>authoring</em>
pipelines, not for running them, so results from components will never be
available when you run this Python code. The is discussed more below in
<em>Understanding what computation occurs when</em>.</p>
</details>
<p>To actually run our pipeline, we define an experiment:</p>
<div class="codehilite"><pre><span></span><code><span class="n">experiment_name</span> <span class="o">=</span> <span class="s2">&quot;averaging-pipeline&quot;</span>

<span class="kn">import</span> <span class="nn">kfp</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">kfp</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">)</span>

<span class="n">pl_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p>And then run an instance of our pipeline with the arguments we want:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">run_pipeline</span><span class="p">(</span>
    <span class="n">exp</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>  <span class="c1"># Run inside the above experiment</span>
    <span class="n">experiment_name</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">-%H%M%S&quot;</span><span class="p">),</span>  <span class="c1"># Give our job a name with a timestamp so its unique</span>
    <span class="n">pipeline_yaml</span><span class="p">,</span>  <span class="c1"># Pass the .yaml.zip we created above.  This defines the pipeline</span>
    <span class="n">params</span><span class="o">=</span><span class="n">pl_params</span>  <span class="c1"># Pass our parameters we want to run the pipeline with</span>
<span class="p">)</span>
</code></pre></div>

<p>This can all be seen in the
<a href="../../1-Experiments/Kubeflow/">Kubeflow Pipelines UI</a>:</p>
<p><img alt="Example of an Experiment in Kubeflow Pipelines UI, highlighting how to choose runs within the experiment" src="../../images/kfp_experiment.png" /></p>
<p><img alt="Example of a Run in Kubeflow Pipelines UI, highlighting Inputs and Outputs" src="../../images/kfp_run.png" /></p>
<p>Later when we want to reuse the pipeline, we can pass different arguments and do
it all again.</p>
<!-- prettier-ignore -->
<p>!!! info "We create our experiment, upload our pipeline, and run from Python in
    this example, but we could also do all this through the Kubeflow Pipelines
    UI above.</p>
<h3 id="understanding-what-computation-occurs-when">Understanding what computation occurs when<a class="headerlink" href="#understanding-what-computation-occurs-when" title="Permanent link">&para;</a></h3>
<p>The above example uses Python code to define:</p>
<ul>
<li>The interface between Kubeflow Pipelines and our Docker containers doing the
  work (by defining <code>ContainerOp</code>'s)</li>
<li>The logic of our pipeline (by defining <code>my_pipeline</code>).</li>
</ul>
<p>But when we run <code>compiler.Compiler().compile()</code> and <code>client.run_pipeline()</code>,
what actually happens?</p>
<p>It is important to remember that everything we run in Python here is specifying
the <em>pipeline</em> and its <em>components</em> in order to write YAML definitions, it is
<strong>not</strong> doing the work of the pipeline. When running
<code>compiler.Compiler().compile()</code>, we are not running our pipeline in the typical
sense. Instead, KFP <strong>uses</strong> <code>my_pipeline</code> to build a YAML version of it. When
we <code>compile</code>, the KFP SDK is passing placeholder arguments to <code>my_pipeline</code> and
tracing where they (and any other runtime data) go, such as any output a
<em>component</em> produces. When <code>compile</code> encounters a <code>ContainerOp</code>, nothing runs
now - instead it takes note that a container will be there in future and
remembers what data it will consume/generate. This can be seen by modifying and
recompiling our pipeline:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my pipeline&#39;s name&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">my_pipeline</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Averaging pipeline which accepts five numbers and does some averaging operations on them</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># NEW CODE</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The value of x is </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The value of a is </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Compute averages for two groups</span>
    <span class="n">avg_1</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">avg_2</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="c1"># NEW CODE</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The value of avg_1.output is </span><span class="si">{</span><span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Use the results from _1 and _2 to compute an overall average</span>
    <span class="n">average_result_overall</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">avg_2</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>

<p>And when we <code>compile</code>, we see print statements:</p>
<div class="codehilite"><pre><span></span><code><span class="x">The value of x is 2</span>
<span class="x">The value of a is </span><span class="cp">{{</span><span class="nv">pipelineparam</span><span class="o">:</span><span class="nv">op</span><span class="o">=</span><span class="err">;</span><span class="nv">name</span><span class="o">=</span><span class="nv">a</span><span class="cp">}}</span><span class="x"></span>
<span class="x">The value of avg_1.output is </span><span class="cp">{{</span><span class="nv">pipelineparam</span><span class="o">:</span><span class="nv">op</span><span class="o">=</span><span class="nv">averge</span><span class="err">;</span><span class="nv">name</span><span class="o">=</span><span class="nv">data</span><span class="cp">}}</span><span class="x"></span>
</code></pre></div>

<p>In the first print statement everything is normal. In the second and third print
statements, however, we see string placeholders rather than actual output. So
while <code>compile</code> does "execute" <code>my_pipeline</code>, the KFP-specific parts of the code
don't actually generate results. This can also be seen in the YAML file that
<code>compile</code> generates, for example looking at the portion defining our
<code>average_result_overall</code> component:</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">average-3</span><span class="w"></span>
<span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;{{inputs.parameters.average-data}}&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;{{inputs.parameters.average-2-data}}&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8scc01covidacr.azurecr.io/kfp-components/average:v1</span><span class="w"></span>
<span class="w">  </span><span class="nt">inputs</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">average-2-data</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">average-data</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">outputs</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">average-3-data</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="nv">./out.txt</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> pipelines.kubeflow.org/pipeline-sdk-type</span><span class="p">:</span><span class="w"> </span><span class="nv">kfp</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div>

<p>In this YAML we see the input parameters passed are placeholders for data from
previous components rather than their actual value. This is because while KFP
knows <strong>a</strong> result from <code>average-data</code> and <code>average-2-data</code> will be passed to
average, but the <strong>value</strong> of that result is not available until the pipeline is
actually run.</p>
<!-- prettier-ignore -->
<details class="info">
<summary>Component naming within the YAML file</summary>
<p>Because we made an <code>average_op</code> factory function with <code>name='average'</code> above,
our YAML file has component names that automatically increment to avoid
recreating the same name twice. We could have been fancier with our
factory functions to more directly control our names, giving an argument
like <code>name='average_first_input_args'</code>, or could even have explicitly
defined the name in our pipeline by using
<code>avg_1 = average_op(a, b, c).set_display_name("Average 1")</code>.</p>
</details>
<p>As one more example, let's try two more pipelines. One has a for loop inside
which prints "Woohoo!" a fixed number of times. whereas the other does the same
but loops <code>n</code> times (where <code>n</code> is a pipeline parameter):</p>
<!-- prettier-ignore -->
<p>!!! info "Pipeline parameters are described more below, but they work like
    parameters for functions. Pipelines can accept data (numbers, string URL's
    to large files in MinIO, etc.) as arguments, allowing a single generic
    pipeline to work in many situations."</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my pipeline&#39;s name&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">another_pipeline</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints to the screen 10 times</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Woohoo!&quot;</span><span class="p">)</span>

    <span class="c1"># And just so we&#39;ve got some component going too...</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">compiler</span><span class="o">.</span><span class="n">Compiler</span><span class="p">()</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="n">another_pipeline</span><span class="p">,</span>
    <span class="s2">&quot;another.yaml.zip&quot;</span>
<span class="p">)</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my pipeline&#39;s name&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">another_another_pipeline</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints to the screen n times</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Woohoo!&quot;</span><span class="p">)</span>

    <span class="c1"># And just so we&#39;ve got some component going too...</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">compiler</span><span class="o">.</span><span class="n">Compiler</span><span class="p">()</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="n">another_another_pipeline</span><span class="p">,</span>
    <span class="s2">&quot;another.yaml.zip&quot;</span>
<span class="p">)</span>
</code></pre></div>

<p>The first works as you'd expect, but the second raises the exception:</p>
<p><code>TypeError: 'PipelineParam' object cannot be interpreted as an integer</code></p>
<p>Why? Because when authoring the pipeline <code>n</code> is a placeholder and has no value.
KFP cannot define a pipeline from this because it does not know how many times
to loop. We'd hit similar problems if using <code>if</code> statements. There are some ways
around this, but they're left to the reader to explore through the
<a href="https://www.kubeflow.org/docs/components/pipelines/overview/">Kubeflow Pipelines docs</a>.</p>
<p>Why does pipeline authoring behave this way? Because <em>pipelines</em> (and
<em>components</em>) are meant to be reusable definitions of logic that are defined in
static YAML files, with all dynamic decision making done inside components. This
can make them a little awkward to define, but also helps them be more reusable.</p>
<h2 id="once-youve-got-the-basics">Once you've got the basics ...<a class="headerlink" href="#once-youve-got-the-basics" title="Permanent link">&para;</a></h2>
<h3 id="data-exchange">Data Exchange<a class="headerlink" href="#data-exchange" title="Permanent link">&para;</a></h3>
<h4 id="passing-data-into-within-and-from-a-pipeline">Passing data into, within, and from a pipeline<a class="headerlink" href="#passing-data-into-within-and-from-a-pipeline" title="Permanent link">&para;</a></h4>
<p>In the first example above, we pass:</p>
<ul>
<li>Numbers into our pipeline</li>
<li>Numbers between components within our pipeline</li>
<li>A number back to the user at the end</li>
</ul>
<p>But as discussed above, pipeline arguments and component results are just
placeholder objects – so how does KFP know our values are numeric? The answer
is: it doesn't. In fact, it didn't even treat them as numbers above. Instead it
treated them as strings. It is just that our pipeline components worked just as
well with <code>"5"</code> as they would have with <code>5</code>.</p>
<p>A safe default assumption is that all data exchange happens as a string. When we
passed <code>a, b, ...</code> into the pipeline, those numbers were implicitly stringified
because they eventually become command line arguments for our Docker container.
When we read the result of <code>avg_1</code> from its <code>out.txt</code>, that result was read as a
string. By calling <code>average_op(avg_1.output, avg_2.output)</code>, we ask KFP to pass
the <strong>string</strong> output from <code>avg_1</code> and <code>avg_2</code> to a new <code>average_op</code>. It just so
happened that, since <code>average_op</code> passes each string as a command line argument
to our Docker image, it didn't really matter they were strings.</p>
<p>You can still use non-string data types, but you need to pass them as serialized
versions. So if we wanted our <code>avg_1</code> component to return both the numbers
passed to it and the average returned as a dictionary, for example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
    <span class="s1">&#39;numbers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
    <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p>We could modify our <code>average.py</code> in the Docker image write our dictionary of
numbers and result to <code>out.txt</code> as JSON. But then when we pass the result to
make <code>average_result_overall</code>, that component needs to deserialize the above
JSON and pull the data from it that it needs. And because these results are not
available when authoring the pipeline, something like this does not work:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">my_pipeline</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Averaging pipeline which accepts five numbers and does some averaging operations on them</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Compute averages for two groups</span>
    <span class="n">avg_1</span> <span class="o">=</span> <span class="n">average_op_that_returns_json</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">avg_2</span> <span class="o">=</span> <span class="n">average_op_that_returns_json</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="c1"># THIS DOES NOT WORK!</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="n">avg_1_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="p">)[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
    <span class="n">avg_2_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">avg_2</span><span class="o">.</span><span class="n">output</span><span class="p">)[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>

    <span class="c1"># Use the results from _1 and _2 to compute an overall average</span>
    <span class="n">average_result_overall</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">avg_2</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>

<p>At <code>compile</code> time, <code>avg_1.output</code> is just a placeholder and can't be treated
like the JSON it will eventually become. To do something like this, we need to
interpret the JSON string within a container.</p>
<h4 id="passing-secrets">Passing Secrets<a class="headerlink" href="#passing-secrets" title="Permanent link">&para;</a></h4>
<p>Pipelines often need sensitive information (passwords, API keys, etc.) to
operate. To keep these secure, these cannot be passed to a Kubeflow Pipeline
using a pipeline argument, environment variable, or as a hard coded value in
python code, as they will be exposed as plain text for others to read.</p>
<p>To address this issue, we use
<a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes secrets</a>
as a way to securely store and pass sensitive information. Each <strong>secret</strong> is a
key-value store containing some number of key-value pairs. The secrets can be
passed <em>by reference</em> to the pipeline.</p>
<!-- prettier-ignore -->
<details class="note">
<summary>Secrets are only accessible within their own namespace</summary>
<p>Secrets can only be accessed within the namespace they are created in.
If you need to use a secret in another namespace, you need to add it there
manually.</p>
</details>
<h5 id="create-a-key-value-store">Create a key-value store<a class="headerlink" href="#create-a-key-value-store" title="Permanent link">&para;</a></h5>
<p>The example below creates a key-value store called <strong>elastic-credentials</strong> which
contains two key-value pairs:</p>
<div class="codehilite"><pre><span></span><code>&quot;username&quot;: &quot;USERNAME&quot;,
&quot;password&quot;: &quot;PASSWORD&quot;
</code></pre></div>

<div class="codehilite"><pre><span></span><code>kubectl create secret generic elastic-credentials <span class="se">\</span>
    --from-literal<span class="o">=</span><span class="nv">username</span><span class="o">=</span><span class="s2">&quot;YOUR_USERNAME&quot;</span> <span class="se">\</span>
    --from-literal<span class="o">=</span><span class="nv">password</span><span class="o">=</span><span class="s2">&quot;YOUR_PASSWORD&quot;</span>
</code></pre></div>

<h5 id="get-an-existing-key-value-store">Get an existing key-value store<a class="headerlink" href="#get-an-existing-key-value-store" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="c1"># The secrets will be base64 encoded.</span>
kubectl get secret elastic-credentials
</code></pre></div>

<h5 id="mounting-kubernetes-secrets-to-environment-variables-in-container-operations">Mounting Kubernetes Secrets to Environment Variables in Container Operations<a class="headerlink" href="#mounting-kubernetes-secrets-to-environment-variables-in-container-operations" title="Permanent link">&para;</a></h5>
<p>Once the secrets are defined in the project namespace, you can mount specific
secrets as environment variables in your container using the Kubeflow SDK.</p>
<p><strong>Example</strong></p>
<p>This example is based off of a
<a href="https://github.com/kubeflow/pipelines/blob/0795597562e076437a21745e524b5c960b1edb68/sdk/python/kfp/aws.py#L33-L57">snippet from the Python KFP source code</a>.</p>
<p>This example shows how (1) an Elasticsearch username(2) an Elasticsearch
password, and (3) a GitLab deploy token are passed to the container operation as
environment variables.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Names of k8s secret key-value stores</span>
<span class="n">ES_CREDENTIALS_STORE</span> <span class="o">=</span> <span class="s2">&quot;elastic-credentials&quot;</span>
<span class="n">GITLAB_CREDENTIALS_STORE</span> <span class="o">=</span> <span class="s2">&quot;gitlab-credentials&quot;</span>
<span class="c1"># k8s secrets key names</span>
<span class="n">ES_USER_KEY</span> <span class="o">=</span> <span class="s2">&quot;username&quot;</span>
<span class="n">ES_PASSWORD_KEY</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span>
<span class="n">GITLAB_DEPLOY_TOKEN_KEY</span> <span class="o">=</span> <span class="s1">&#39;token&#39;</span>
<span class="c1"># Names of environment variables that secrets should be mounted to in the</span>
<span class="c1"># container</span>
<span class="n">ES_USER_ENV</span> <span class="o">=</span> <span class="s2">&quot;ES_USER&quot;</span>
<span class="n">ES_PASS_ENV</span> <span class="o">=</span> <span class="s2">&quot;ES_PASS&quot;</span>
<span class="n">GITLAB_DEPLOY_TOKEN_ENV</span> <span class="o">=</span> <span class="s2">&quot;GITLAB_DEPLOY_TOKEN&quot;</span>
<span class="c1"># ...</span>
<span class="n">container_operation</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">ContainerOp</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;some-op&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s1">&#39;some-image&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
    <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">ES_USER_ENV</span><span class="p">,</span>
        <span class="n">value_from</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVarSource</span><span class="p">(</span>
            <span class="n">secret_key_ref</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecretKeySelector</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">ES_CREDENTIALS_STORE</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="n">ES_USER_KEY</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span> \
    <span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">ES_PASS_ENV</span><span class="p">,</span>
            <span class="n">value_from</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVarSource</span><span class="p">(</span>
                <span class="n">secret_key_ref</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecretKeySelector</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">ES_CREDENTIALS_STORE</span><span class="p">,</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">ES_PASSWORD_KEY</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span> \
    <span class="o">.</span><span class="n">add_env_variable</span><span class="p">(</span>
        <span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVar</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">GITLAB_DEPLOY_TOKEN_ENV</span><span class="p">,</span>
            <span class="n">value_from</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1EnvVarSource</span><span class="p">(</span>
                <span class="n">secret_key_ref</span><span class="o">=</span><span class="n">k8s_client</span><span class="o">.</span><span class="n">V1SecretKeySelector</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">GITLAB_CREDENTIALS_STORE</span><span class="p">,</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">GITLAB_DEPLOY_TOKEN_KEY</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>

<h4 id="parameterizing-pipelines">Parameterizing pipelines<a class="headerlink" href="#parameterizing-pipelines" title="Permanent link">&para;</a></h4>
<p>Whenever possible, create pipelines in a generic way: define parameters that
might change as pipeline inputs instead of writing values directly in your
Python code. For example, if you want a pipeline to process data from
<code>minimal-tenant/john-smith/data1.csv</code>, don't hard code that path - instead,
accept it as a pipeline parameter. This way you can call the same pipeline
repeatedly by passing it the data location as an argument. You can
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/mapreduce-pipeline/Compute-Pi-with-reusable-components-and-minio.ipynb">see this approach in our example notebooks</a>,
where we accept MinIO credentials and the location to store our results as
pipeline parameters.</p>
<h3 id="passing-complexlarge-data-tofrom-a-pipeline">Passing complex/large data to/from a pipeline<a class="headerlink" href="#passing-complexlarge-data-tofrom-a-pipeline" title="Permanent link">&para;</a></h3>
<p>Although small data can often be stringified, passing by string is not suitable
for complex data (large parquet files, images, etc.). It is common to use blob
storage (for example: <a href="../../5-Storage/MinIO/">MinIO</a>) or other outside storage
methods to persist data between components or even for later use. A typical
pattern would be:</p>
<ul>
<li>Upload large/complex input data to blob storage (e.g. training data, a saved
  model, etc.)</li>
<li>Pass the location of this data into the pipeline as parameters, and make your
  pipeline/components fetch the data as required</li>
<li>For each component in a pipeline, specify where they place outputs in the same
  way</li>
<li>For each component also <code>return</code> the path where it has stored its data (in
  this case, the string we passed it in the above bullet). This feels redundant,
  but it is a common pattern that lets you chain operations together</li>
</ul>
<p>Here is a schematic example of this pattern:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">my_blobby_pipeline</span><span class="p">(</span><span class="n">path_to_numbers_1</span><span class="p">,</span> <span class="n">path_to_numbers_2</span><span class="p">,</span> <span class="n">path_for_output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Averaging pipeline which accepts two groups of numbers and does some averaging operations on them</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Compute averages for two groups</span>
    <span class="n">avg_1</span> <span class="o">=</span> <span class="n">average_op_that_takes_path_to_blob</span><span class="p">(</span><span class="n">path_to_numbers</span><span class="o">=</span><span class="n">path_to_numbers_1</span><span class="p">,</span>
                                               <span class="n">output_location</span><span class="o">=</span><span class="n">path_for_output</span> <span class="o">+</span> <span class="s2">&quot;/avg_1&quot;</span>
                                               <span class="p">)</span>
    <span class="n">avg_2</span> <span class="o">=</span> <span class="n">average_op_that_takes_path_to_blob</span><span class="p">(</span><span class="n">numbers</span><span class="o">=</span><span class="n">path_to_numbers_2</span><span class="p">,</span>
                                               <span class="n">output_location</span><span class="o">=</span><span class="n">path_for_output</span> <span class="o">+</span> <span class="s2">&quot;/avg_2&quot;</span>
                                               <span class="p">)</span>

    <span class="c1"># Note that this assumes the average_op can take multiple paths to numbers.  You could also have an</span>
    <span class="c1"># aggregation component that combines avg_1 and avg_2 into a single file of numbers</span>

    <span class="n">paths_to_numbers</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">avg_1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
        <span class="n">avg_2</span><span class="o">.</span><span class="n">output</span>
    <span class="p">]</span>
    <span class="n">average_result_overall</span> <span class="o">=</span> <span class="n">average_op</span><span class="p">(</span><span class="n">path_to_numbers</span><span class="o">=</span><span class="n">paths_to_numbers</span><span class="p">,</span>
                                        <span class="n">output_location</span><span class="o">=</span><span class="n">path_for_output</span> <span class="o">+</span> <span class="s2">&quot;/average_result_overall&quot;</span>
                                       <span class="p">)</span>
</code></pre></div>

<p>Within this platform, the primary method for persisting large files is through
MinIO as described in our <a href="../..#storage"><em>Storage</em> documentation</a>.
Examples of this are also described in our
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/tree/master/self-serve-storage">example notebooks</a>
(also found in <code>jupyter-notebooks/self-serve-storage/</code> on any notebook server).</p>
<h3 id="typical-development-patterns">Typical development patterns<a class="headerlink" href="#typical-development-patterns" title="Permanent link">&para;</a></h3>
<h4 id="end-to-end-pipeline-development">End-to-end pipeline development<a class="headerlink" href="#end-to-end-pipeline-development" title="Permanent link">&para;</a></h4>
<p>A typical pattern for building pipelines in Kubeflow Pipelines is:</p>
<ol>
<li>Define components for each of your tasks</li>
<li>Compose your components in a <code>@dsl.pipeline</code> decorated function</li>
<li><code>compile()</code> your pipeline, upload your YAML files, and run</li>
</ol>
<p>This pattern lets you define portable components that can be individually tested
before combining them into a full pipeline. Depending on the type and complexity
of task, there are different methods for building the components.</p>
<h3 id="methods-for-authoring-components">Methods for authoring components<a class="headerlink" href="#methods-for-authoring-components" title="Permanent link">&para;</a></h3>
<p>Fundamentally, every component in Kubeflow Pipelines runs a container. Kubeflow
Pipelines offers several methods to define these components with different
levels of flexibility and complexity.</p>
<h5 id="user-defined-container-components">User-defined container components<a class="headerlink" href="#user-defined-container-components" title="Permanent link">&para;</a></h5>
<p>You can define tasks through custom Docker images. The design pattern for this
is:</p>
<ul>
<li>Define (update) code for your task and commit to Git</li>
<li>Build an image from your task (through manual command or CI pipeline)</li>
<li>Test running this Docker image locally (and iterate if needed)</li>
<li>Push the image to a container registry (usually Docker hub, but it will be
  Azure Container Registry in our case on the Advanced Analytics Workspace)</li>
<li>Update the Kubeflow Pipeline to point to the new image (via <code>dsl.ContainerOp</code>
  like above) and test the pipeline</li>
</ul>
<p>This lets you run anything you can put into a Docker image as a task in Kubeflow
Pipelines. You can manage and test your images and have complete control over
how they run and what dependencies use. The <code>docker run</code> interface for each
container becomes the API that Kubeflow Pipelines <code>dsl.ContainerOp</code> interacts
with – running the containers is effectively like running them locally using a
terminal. Anything you can make into a container with that interface can be run
in Kubeflow Pipelines.</p>
<!-- prettier-ignore -->
<p>!!! danger "...however, for security reasons the platform currently does not
    allow users to build/run custom Docker images. This is planned for the
    future, but in interim see <em>Lightweight components</em> for a way to develop
    pipelines without custom images"</p>
<h5 id="lightweight-python-components">Lightweight Python components<a class="headerlink" href="#lightweight-python-components" title="Permanent link">&para;</a></h5>
<p>While full custom containers offer great flexibility, sometimes they're heavier
than needed. The Kubeflow Pipelines SDK also allows for
<a href="https://www.kubeflow.org/docs/pipelines/sdk/lightweight-python-components/">Lightweight Python Components</a>,
which are components that can be built straight from Python without building new
container images for each change. These components are great for fast iteration
during development, as well as for simple tasks that can be written and managed
easily.</p>
<p>This is an example of a lightweight pipeline with a single component that
concatenates strings:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">kfp</span>
<span class="kn">from</span> <span class="nn">kfp</span> <span class="kn">import</span> <span class="n">dsl</span>
<span class="kn">from</span> <span class="nn">kfp.components</span> <span class="kn">import</span> <span class="n">func_to_container_op</span>

<span class="k">def</span> <span class="nf">concat_string</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> | </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">)&quot;</span>

<span class="n">concat_string_component</span> <span class="o">=</span> <span class="n">func_to_container_op</span><span class="p">(</span><span class="n">concat_string</span><span class="p">,</span>
                                               <span class="n">base_image</span><span class="o">=</span><span class="s2">&quot;python:3.8.3-buster&quot;</span>
                                               <span class="p">)</span>
<span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;My lightweight pipeline&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">,</span> <span class="n">str3</span><span class="p">):</span>
    <span class="c1"># Note that we use the concat_string_component, not the</span>
    <span class="c1"># original concat_string() function</span>
    <span class="n">concat_result_1</span> <span class="o">=</span> <span class="n">concat_string_component</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">)</span>

    <span class="c1"># By using cancat_result_1&#39;s output, we define the dependency of</span>
    <span class="c1"># concat_result_2 on concat_result_1</span>
    <span class="n">concat_result_2</span> <span class="o">=</span> <span class="n">concat_string_component</span><span class="p">(</span><span class="n">concat_result_1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">str3</span><span class="p">)</span>
</code></pre></div>

<p>We see that our <code>concat_string</code> component is defined directly in Python rather
than from a Docker image. In the end, our function still runs in a container,
but we don't have to built it ourselves: <code>func_to_container_op()</code> runs our
Python code inside the provided base image (<code>python:3.8.3-buster</code>). This lets
use avoid building every time we change our code. The base image can be anything
accessible by Kubeflow, which includes all images in the Azure Container
Registry and any
<a href="https://github.com/StatCan/gatekeeper-policies/blob/master/general/container-allowed-images/constraint.yaml">whitelisted images</a>
from Docker hub.</p>
<!-- prettier-ignore -->
<details class="danger">
<summary>Lightweight components have a number of advantages but also some drawbacks</summary>
<p>See <a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/kfp-basics/demo_kfp_lightweight_components.ipynb">this description</a>
of their basic characteristics, as well as
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/mapreduce-pipeline/Compute-Pi-with-lightweight-components-and-minio.ipynb">this example</a>
which uses them in a more complex pipeline</p>
</details>
<!-- prettier-ignore -->
<details class="info">
<summary>A convenient base image to use is the the image your notebook server is running</summary>
<p>By using the same image as your notebook server, you ensure Kubeflow
Pipelines has the same packages available to it as the notebook where you
do your analysis.  This can help avoid errors from importing packages
specific to your environment. You can find that link from the notebook
server page as shown below, but make sure you prepend the registry URL (so
the below image would have
<code>base_image=k8scc01covidacr.azurecr.io/machine-learning-notebook-cpu:562fa4a2899eeb9ae345c51c2491447ec31a87d7</code>
).  Note that while using a fully featured base image for iteration is fine,
it's good practice to keep production pipelines lean and only supply the
necessary software.  That way you reduce the startup time for each step in
your pipeline.
<img alt="A Kubeflow Pipeline" src="../../images/kubeflow_pipelines_notebook_server_image.png" /></p>
</details>
<h5 id="defining-components-directly-in-yaml">Defining components directly in YAML<a class="headerlink" href="#defining-components-directly-in-yaml" title="Permanent link">&para;</a></h5>
<p>Components can be defined directly with a YAML file, where the designer can run
terminal commands from a given Docker image. This can be a great way to make
non-Python pipeline components from existing containers. As with all components,
we can pass both arguments and data files into/out of the component. For
example:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Concat Strings</span><span class="w"></span>
<span class="nt">inputs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="nt">      name</span><span class="p">:</span><span class="w"> </span><span class="nv">Input text 1</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="nt">      type</span><span class="p">:</span><span class="w"> </span><span class="nv">String</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="nt">      description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Some</span><span class="nv"> </span><span class="s">text</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">terminal</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">tee</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">file&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="nt">      name</span><span class="p">:</span><span class="w"> </span><span class="nv">Input text 2</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="nt">      type</span><span class="p">:</span><span class="w"> </span><span class="nv">String</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="nt">      description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Some</span><span class="nv"> </span><span class="s">text</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">terminal</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">tee</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">file&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="nt">outputs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">Output filename</span><span class="p p-Indicator">,</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="nt">implementation</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">container</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash:5</span><span class="w"></span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-ex</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">        </span><span class="no">echo &quot;$0 | $1&quot; | tee $2</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> inputValue</span><span class="p">:</span><span class="w"> </span><span class="nv">Input text 1</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> inputValue</span><span class="p">:</span><span class="w"> </span><span class="nv">Input text 2</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> outputPath</span><span class="p">:</span><span class="w"> </span><span class="nv">Output filename</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div>

<p>This example concatenates two strings like our lightweight example above. We
then define a component in python from this YAML:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">kfp.components</span> <span class="kn">import</span> <span class="n">load_component_from_file</span>
<span class="n">echo_and_tee</span> <span class="o">=</span> <span class="n">load_component_from_file</span><span class="p">(</span><span class="s1">&#39;path/to/echo_and_tee.yaml&#39;</span><span class="p">)</span>

<span class="nd">@dsl</span><span class="o">.</span><span class="n">pipeline</span>
<span class="k">def</span> <span class="nf">my_pipeline</span><span class="p">():</span>
    <span class="n">echo_and_tee_task_1</span> <span class="o">=</span> <span class="n">echo_and_tee</span><span class="p">(</span><span class="s2">&quot;My text to echo&quot;</span><span class="p">)</span>

    <span class="c1"># A second use that consumes the return of the first one</span>
    <span class="n">echo_and_tee_task_2</span> <span class="o">=</span> <span class="n">echo_and_tee</span><span class="p">(</span><span class="n">echo_and_tee_task_1</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>

<p>See
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/mapreduce-pipeline/Compute-Pi-with-reusable-components-and-minio.ipynb">this example</a>
for more details on using existing components.</p>
<h5 id="reusing-existing-components">Reusing existing components<a class="headerlink" href="#reusing-existing-components" title="Permanent link">&para;</a></h5>
<p>Similar to well abstracted functions, well abstracted components can reduce the
amount of code you have to write for any given project. For example, rather than
teaching your machine learning <code>train_model</code> component to also save the
resulting model to MinIO, you can instead have <code>train_model</code> return the model
and then Kubeflow Pipelines can pass the model to a reusable <code>copy_to_minio</code>
component. This reuse pattern applies to components defined through any means
(containers, lightweight, or YAML).
<a href="https://github.com/StatCan/aaw-contrib-jupyter-notebooks/blob/master/mapreduce-pipeline/Compute-Pi-with-reusable-components-and-minio.ipynb">Take a look at our example notebook</a>,
which reuses provided components for simple file IO tasks.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../2-Publishing/Custom/" title="Custom" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Custom
              </div>
            </div>
          </a>
        
        
          <a href="../PaaS/" title="PaaS Integration" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                PaaS Integration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Statistics Canada
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/StatCan/daaas" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://statcan-aaw.slack.com" target="_blank" rel="noopener" title="statcan-aaw.slack.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>